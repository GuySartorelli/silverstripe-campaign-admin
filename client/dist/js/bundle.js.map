{"version":3,"sources":["webpack:///webpack/bootstrap 35cae781a6d86a730bbe","webpack:///external \"React\"","webpack:///external \"SilverStripeComponent\"","webpack:///external \"i18n\"","webpack:///./client/src/state/campaign/CampaignActionTypes.js","webpack:///external \"Breadcrumb\"","webpack:///external \"BreadcrumbsActions\"","webpack:///external \"FormAction\"","webpack:///external \"ReactRedux\"","webpack:///external \"ReactRouter\"","webpack:///external \"Redux\"","webpack:///external \"Toolbar\"","webpack:///./client/src/boot/index.js","webpack:///./client/src/bundles/bundle.js","webpack:///./client/src/containers/CampaignAdmin/CampaignAdmin.js","webpack:///./client/src/containers/CampaignAdmin/CampaignAdminItem.js","webpack:///./client/src/containers/CampaignAdmin/CampaignAdminList.js","webpack:///./client/src/state/campaign/CampaignActions.js","webpack:///./client/src/state/campaign/CampaignReducer.js","webpack:///external \"Accordion\"","webpack:///external \"AccordionBlock\"","webpack:///external \"Backend\"","webpack:///external \"Config\"","webpack:///external \"DeepFreezeStrict\"","webpack:///external \"FormBuilderLoader\"","webpack:///external \"ListGroupItem\"","webpack:///external \"Preview\"","webpack:///external \"ReactBootstrap\"","webpack:///external \"ReactRouteRegister\"","webpack:///external \"RecordsActionTypes\"","webpack:///external \"RecordsActions\"","webpack:///external \"ReducerRegister\"","webpack:///external \"ReduxForm\"","webpack:///external \"formatWrittenNumber\""],"names":["SET_CAMPAIGN_ACTIVE_CHANGESET","SET_CAMPAIGN_SELECTED_CHANGESETITEM","PUBLISH_CAMPAIGN_REQUEST","PUBLISH_CAMPAIGN_SUCCESS","PUBLISH_CAMPAIGN_FAILURE","document","addEventListener","sectionConfig","getSection","add","path","url","component","childRoutes","require","breadcrumbsActions","sectionConfigKey","CampaignAdmin","props","publishApi","createEndpointFetcher","publishEndpoint","method","defaultData","SecurityID","securityId","payloadSchema","id","urlReplacement","remove","handleBackButtonClick","bind","handleCreateCampaignSubmit","handleFormAction","breadcrumbs","title","params","view","length","setBreadcrumbs","hasChangedRoute","text","_t","href","push","getActionRoute","event","last","preventDefault","router","data","action","submitFn","promise","Error","then","response","hasErrors","errors","sectionUrl","record","name","currentTarget","renderItemListView","renderDetailEditView","renderCreateView","renderIndexView","schemaUrl","form","EditForm","formActionProps","icon","handleClick","addCampaign","formBuilderProps","createFn","campaignListCreateFn","campaignId","itemListViewEndpoint","baseSchemaUrl","campaignEditForm","campaignCreateForm","Component","extendedProps","Object","assign","typeUrlParam","schemaComponent","handleDrillDown","ID","handleEditRecord","propTypes","PropTypes","object","isRequired","string","shape","mapStateToProps","state","ownProps","config","sections","find","section","formID","selector","campaign","mapDispatchToProps","dispatch","CampaignAdminItem","numReferTo","item","_links","references","numReferredBy","referenced_by","getNumReferTo","sprintf","getNumReferredBy","thumbnail","badge","State","ChangeType","className","Title","links","renderLinks","Thumbnail","tooltipTexts","getReferToTooltipText","getReferredByTooltipText","toLocaleLowerCase","tooltip","join","selected","isLinked","linksClasses","bool","recordActions","campaignActions","CampaignAdminList","handlePublish","handleItemSelected","handleCloseItem","fetchURL","replace","keys","fetchRecord","treeClass","Name","itemId","changeSetItemId","items","getItems","itemLinks","selectedClass","itemGroups","groupItemsForSet","accordionBlocks","selectedItem","getSelectedItem","selectedItemsLinkedTo","selectedItemsLinkedFrom","forEach","group","groupCount","listGroupItems","singular","plural","groupid","itemClassNames","linkToObj","ChangeSetItemID","parseInt","linkFromObj","pagesLink","absoluteBaseUrl","body","bodyClass","renderButtonToolbar","selectChangeSetItem","actionProps","buttonStyle","loading","isPublishing","disabled","_embedded","groups","classname","BaseClass","Singular","Plural","e","publishCampaign","number","func","records","showCampaignView","type","payload","recordType","FETCH_RECORD_SUCCESS","catch","error","initialState","reducer"],"mappings":"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","file":"js/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 12);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 35cae781a6d86a730bbe","module.exports = React;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"React\"\n// module id = 0\n// module chunks = 0","module.exports = SilverStripeComponent;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"SilverStripeComponent\"\n// module id = 1\n// module chunks = 0","module.exports = i18n;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"i18n\"\n// module id = 2\n// module chunks = 0","export default {\n  SET_CAMPAIGN_ACTIVE_CHANGESET: 'SET_CAMPAIGN_ACTIVE_CHANGESET',\n  SET_CAMPAIGN_SELECTED_CHANGESETITEM: 'SET_CAMPAIGN_SELECTED_CHANGESETITEM',\n  PUBLISH_CAMPAIGN_REQUEST: 'PUBLISH_CAMPAIGN_REQUEST',\n  PUBLISH_CAMPAIGN_SUCCESS: 'PUBLISH_CAMPAIGN_SUCCESS',\n  PUBLISH_CAMPAIGN_FAILURE: 'PUBLISH_CAMPAIGN_FAILURE',\n};\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/state/campaign/CampaignActionTypes.js","module.exports = Breadcrumb;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"Breadcrumb\"\n// module id = 4\n// module chunks = 0","module.exports = BreadcrumbsActions;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"BreadcrumbsActions\"\n// module id = 5\n// module chunks = 0","module.exports = FormAction;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"FormAction\"\n// module id = 6\n// module chunks = 0","module.exports = ReactRedux;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ReactRedux\"\n// module id = 7\n// module chunks = 0","module.exports = ReactRouter;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ReactRouter\"\n// module id = 8\n// module chunks = 0","module.exports = Redux;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"Redux\"\n// module id = 9\n// module chunks = 0","module.exports = Toolbar;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"Toolbar\"\n// module id = 10\n// module chunks = 0","import { withRouter } from 'react-router';\nimport ConfigHelpers from 'lib/Config';\nimport reducerRegister from 'lib/ReducerRegister';\nimport reactRouteRegister from 'lib/ReactRouteRegister';\nimport CampaignAdmin from 'containers/CampaignAdmin/CampaignAdmin';\nimport CampaignReducer from 'state/campaign/CampaignReducer';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const sectionConfig = ConfigHelpers.getSection('SilverStripe\\\\CampaignAdmin\\\\CampaignAdmin');\n  reactRouteRegister.add({\n    path: sectionConfig.url,\n    component: withRouter(CampaignAdmin),\n    childRoutes: [\n      { path: ':type/:id/:view', component: CampaignAdmin },\n      { path: 'set/:id/:view', component: CampaignAdmin },\n    ],\n  });\n\n  reducerRegister.add('campaign', CampaignReducer);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/boot/index.js","require('../boot/index.js');\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/bundles/bundle.js","import React from 'react';\nimport { connect } from 'react-redux';\nimport { formValueSelector } from 'redux-form';\nimport { bindActionCreators } from 'redux';\nimport { withRouter } from 'react-router';\nimport backend from 'lib/Backend';\nimport * as breadcrumbsActions from 'state/breadcrumbs/BreadcrumbsActions';\nimport Breadcrumb from 'components/Breadcrumb/Breadcrumb';\nimport SilverStripeComponent from 'lib/SilverStripeComponent';\nimport FormAction from 'components/FormAction/FormAction';\nimport i18n from 'i18n';\nimport Toolbar from 'components/Toolbar/Toolbar';\nimport FormBuilderLoader from 'containers/FormBuilderLoader/FormBuilderLoader';\nimport CampaignAdminList from './CampaignAdminList';\n\nconst sectionConfigKey = 'SilverStripe\\\\CampaignAdmin\\\\CampaignAdmin';\n\nclass CampaignAdmin extends SilverStripeComponent {\n\n  constructor(props) {\n    super(props);\n\n    this.publishApi = backend.createEndpointFetcher({\n      url: this.props.sectionConfig.publishEndpoint.url,\n      method: this.props.sectionConfig.publishEndpoint.method,\n      defaultData: { SecurityID: this.props.securityId },\n      payloadSchema: {\n        id: { urlReplacement: ':id', remove: true },\n      },\n    });\n\n    // Bind\n    this.handleBackButtonClick = this.handleBackButtonClick.bind(this);\n    this.handleCreateCampaignSubmit = this.handleCreateCampaignSubmit.bind(this);\n    this.handleFormAction = this.handleFormAction.bind(this);\n  }\n\n  componentWillMount() {\n    // Ensure default breadcrumbs are setup\n    const { breadcrumbs, title, params: { view, id } } = this.props;\n    if (breadcrumbs.length === 0) {\n      this.setBreadcrumbs(view, id, title);\n    }\n  }\n\n  componentWillReceiveProps(props) {\n    const { title, params: { id, view } } = props;\n    const hasChangedRoute = (\n      this.props.params.id !== id ||\n      this.props.params.view !== view ||\n      this.props.title !== title\n    );\n    if (hasChangedRoute) {\n      this.setBreadcrumbs(view, id, title);\n    }\n  }\n\n  setBreadcrumbs(view, id, title) {\n    // Set root breadcrumb\n    const breadcrumbs = [{\n      text: i18n._t('CampaignAdmin.CAMPAIGN', 'Campaigns'),\n      href: this.props.sectionConfig.url,\n    }];\n    switch (view) {\n      case 'show':\n        // NOOP - Lazy loaded in CampaignAdminList.js\n        break;\n      case 'edit':\n        // @todo - Lazy load in FormBuilderLoader / GridField\n        breadcrumbs.push({\n          text: title,\n          href: this.getActionRoute(id, view),\n        });\n        break;\n      case 'create':\n        breadcrumbs.push({\n          text: i18n._t('CampaignAdmin.ADD_CAMPAIGN', 'Add Campaign'),\n          href: this.getActionRoute(id, view),\n        });\n        break;\n      default:\n        // NOOP\n        break;\n    }\n\n    this.props.breadcrumbsActions.setBreadcrumbs(breadcrumbs);\n  }\n\n  handleBackButtonClick(event) {\n    // Go back to second from last breadcrumb (where last item is current)\n    if (this.props.breadcrumbs.length > 1) {\n      const last = this.props.breadcrumbs[this.props.breadcrumbs.length - 2];\n      if (last && last.href) {\n        event.preventDefault();\n        this.props.router.push(last.href);\n      }\n    }\n  }\n\n\n  /**\n   * Handler for creating campaign, will redirect to edit form\n   *\n   * @param {object} data\n   * @param {string} action\n   * @param {function} submitFn\n   * @returns {Promise}\n   */\n  handleCreateCampaignSubmit(data, action, submitFn) {\n    const promise = submitFn();\n    if (!promise) {\n      throw new Error('Promise was not returned for submitting');\n    }\n    return promise\n      .then((response) => {\n        const hasErrors = response.errors && response.errors.length > 0;\n        if (action === 'action_save' && !hasErrors) {\n          // open the new campaign in edit mode after save completes\n          const sectionUrl = this.props.sectionConfig.url;\n          const id = response.record.id;\n          this.props.router.push(`${sectionUrl}/set/${id}/edit`);\n        }\n\n        return response;\n      });\n  }\n\n  handleFormAction(event) {\n    const name = event.currentTarget.name;\n    // intercept the Add to Campaign submit and open the modal dialog instead\n    if (name === 'action_cancel') {\n      const url = this.props.sectionConfig.url;\n      this.props.router.push(url);\n      event.preventDefault();\n    }\n  }\n\n  render() {\n    let view = null;\n\n    switch (this.props.params.view) {\n      case 'show':\n        view = this.renderItemListView();\n        break;\n      case 'edit':\n        view = this.renderDetailEditView();\n        break;\n      case 'create':\n        view = this.renderCreateView();\n        break;\n      default:\n        view = this.renderIndexView();\n    }\n\n    return view;\n  }\n\n  /**\n   * Renders the default view which displays a list of Campaigns.\n   *\n   * @return object\n   */\n  renderIndexView() {\n    const schemaUrl = this.props.sectionConfig.form.EditForm.schemaUrl;\n    const formActionProps = {\n      title: i18n._t('CampaignAdmin.ADDCAMPAIGN'),\n      icon: 'plus',\n      handleClick: this.addCampaign.bind(this),\n    };\n    const formBuilderProps = {\n      createFn: this.campaignListCreateFn.bind(this),\n      schemaUrl,\n    };\n\n    return (\n      <div className=\"fill-height\" aria-expanded=\"true\">\n        <Toolbar>\n          <Breadcrumb multiline />\n        </Toolbar>\n        <div className=\"panel panel--padded panel--scrollable flexbox-area-grow\">\n          <div className=\"toolbar toolbar--content\">\n            <div className=\"btn-toolbar\">\n              <FormAction {...formActionProps} />\n            </div>\n          </div>\n          <FormBuilderLoader {...formBuilderProps} />\n        </div>\n      </div>\n    );\n  }\n\n  /**\n   * Renders a list of items in a Campaign.\n   *\n   * @return object\n   */\n  renderItemListView() {\n    const props = {\n      sectionConfig: this.props.sectionConfig,\n      campaignId: this.props.params.id,\n      itemListViewEndpoint: this.props.sectionConfig.itemListViewEndpoint,\n      publishApi: this.publishApi,\n      handleBackButtonClick: this.handleBackButtonClick.bind(this),\n    };\n\n    return (\n      <CampaignAdminList {...props} />\n    );\n  }\n\n  /**\n   * Renders the Detail Edit Form for a Campaign.\n   */\n  renderDetailEditView() {\n    if (this.props.params.id <= 0) {\n      return this.renderCreateView();\n    }\n    const baseSchemaUrl = this.props.sectionConfig.form.campaignEditForm.schemaUrl;\n    const schemaUrl = `${baseSchemaUrl}/${this.props.params.id}`;\n\n    return (\n      <div className=\"fill-height\">\n        <Toolbar showBackButton handleBackButtonClick={this.handleBackButtonClick}>\n          <Breadcrumb multiline />\n        </Toolbar>\n\n        <div className=\"panel panel--padded panel--scrollable flexbox-area-grow form--inline\">\n          <FormBuilderLoader\n            handleAction={this.handleFormAction}\n            schemaUrl={schemaUrl}\n          />\n        </div>\n      </div>\n    );\n  }\n\n  /**\n   * Render the view for creating a new Campaign.\n   */\n  renderCreateView() {\n    const schemaUrl = this.props.sectionConfig.form.campaignCreateForm.schemaUrl;\n    return (\n      <div className=\"fill-height\">\n        <Toolbar showBackButton handleBackButtonClick={this.handleBackButtonClick}>\n          <Breadcrumb multiline />\n        </Toolbar>\n        <div className=\"panel panel--padded panel--scrollable flexbox-area-grow form--inline\">\n          <FormBuilderLoader\n            handleSubmit={this.handleCreateCampaignSubmit}\n            handleAction={this.handleFormAction}\n            schemaUrl={schemaUrl}\n          />\n        </div>\n      </div>\n    );\n  }\n\n  /**\n   * Hook to allow customisation of components being constructed\n   * by the Campaign DetailEdit FormBuilderLoader.\n   *\n   * @param {Object} Component - Component constructor.\n   * @param {Object} props - Props passed from FormBuilderLoader.\n   *\n   * @return {Object} - Instanciated React component\n   */\n  campaignEditCreateFn(Component, props) {\n    const url = this.props.sectionConfig.url;\n\n    // Route to the Campaigns index view when 'Cancel' is clicked.\n    if (props.name === 'action_cancel') {\n      const extendedProps = Object.assign({}, props, {\n        handleClick: (event) => {\n          event.preventDefault();\n          this.props.router.push(url);\n        },\n      });\n\n      return <Component key={props.id} {...extendedProps} />;\n    }\n\n    return <Component key={props.id} {...props} />;\n  }\n\n  /**\n   * Hook to allow customisation of components being constructed\n   * by the Campaign creation FormBuilderLoader.\n   *\n   * @param {Object} Component - Component constructor.\n   * @param {Object} props - Props passed from FormBuilderLoader.\n   *\n   * @return {Object} - Instanciated React component\n   */\n  campaignAddCreateFn(Component, props) {\n    const url = this.props.sectionConfig.url;\n\n    // Route to the Campaigns index view when 'Cancel' is clicked.\n    if (props.name === 'action_cancel') {\n      const extendedProps = Object.assign({}, props, {\n        handleClick: (event) => {\n          event.preventDefault();\n          this.props.router.push(url);\n        },\n      });\n\n      return <Component key={props.name} {...extendedProps} />;\n    }\n\n    return <Component key={props.name} {...props} />;\n  }\n\n  /**\n   * Hook to allow customisation of components being constructed\n   * by the Campaign list FormBuilderLoader.\n   *\n   * @param {Object} Component - Component constructor.\n   * @param {Object} props - Props passed from FormBuilderLoader.\n   *\n   * @return object - Instanciated React component\n   */\n  campaignListCreateFn(Component, props) {\n    const sectionUrl = this.props.sectionConfig.url;\n    const typeUrlParam = 'set';\n\n    if (props.schemaComponent === 'GridField') {\n      const extendedProps = Object.assign({}, props, {\n        data: Object.assign({}, props.data, {\n          handleDrillDown: (event, record) => {\n            this.props.router.push(`${sectionUrl}/${typeUrlParam}/${record.ID}/show`);\n          },\n          handleEditRecord: (event, id) => {\n            this.props.router.push(`${sectionUrl}/${typeUrlParam}/${id}/edit`);\n          },\n        }),\n      });\n\n      return <Component key={extendedProps.name} {...extendedProps} />;\n    }\n\n    return <Component key={props.name} {...props} />;\n  }\n\n  addCampaign() {\n    const path = this.getActionRoute(0, 'create');\n    this.props.router.push(path);\n  }\n\n  /**\n   * Generate route with the given id and view\n   *\n   * @param {Number} id\n   * @param {String} view\n   * @return {String}\n   */\n  getActionRoute(id, view) {\n    return `${this.props.sectionConfig.url}/set/${id}/${view}`;\n  }\n}\n\nCampaignAdmin.propTypes = {\n  breadcrumbsActions: React.PropTypes.object.isRequired,\n  campaignId: React.PropTypes.string,\n  sectionConfig: React.PropTypes.shape({\n    publishEndpoint: React.PropTypes.shape({\n      url: React.PropTypes.string,\n      method: React.PropTypes.string,\n    }),\n    form: React.PropTypes.shape({\n      EditForm: React.PropTypes.shape({\n        schemaUrl: React.PropTypes.string,\n      }),\n      campaignEditForm: React.PropTypes.shape({\n        schemaUrl: React.PropTypes.string,\n      }),\n      campaignCreateForm: React.PropTypes.shape({\n        schemaUrl: React.PropTypes.string,\n      }),\n    }),\n  }),\n  securityId: React.PropTypes.string.isRequired,\n  view: React.PropTypes.string,\n};\n\nfunction mapStateToProps(state, ownProps) {\n  let title = null;\n  const sectionConfig = state.config.sections.find((section) => (\n    section.name === sectionConfigKey\n  ));\n\n  if (ownProps.params.id > 0) {\n    const formID = `${sectionConfig.form.campaignEditForm.schemaUrl}/${ownProps.params.id}`;\n    const selector = formValueSelector(formID);\n    title = selector(state, 'Name');\n  }\n\n  return {\n    config: state.config,\n    campaignId: state.campaign.campaignId,\n    view: state.campaign.view,\n    breadcrumbs: state.breadcrumbs,\n    sectionConfig,\n    securityId: state.config.SecurityID,\n    title,\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    breadcrumbsActions: bindActionCreators(breadcrumbsActions, dispatch),\n  };\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(CampaignAdmin));\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/containers/CampaignAdmin/CampaignAdmin.js","import React from 'react';\nimport SilverStripeComponent from 'lib/SilverStripeComponent';\nimport i18n from 'i18n';\nimport { Tooltip, OverlayTrigger } from 'react-bootstrap-ss';\nimport formatWrittenNumber from 'lib/formatWrittenNumber';\n\n/**\n * Describes an individual campaign item\n */\nclass CampaignAdminItem extends SilverStripeComponent {\n\n  /**\n   * @return integer\n   */\n  getNumReferTo() {\n    const numReferTo = (\n      this.props.item._links &&\n      this.props.item._links.references &&\n      this.props.item._links.references.length\n    );\n\n    return numReferTo || 0;\n  }\n\n  /**\n   * @return integer\n   */\n  getNumReferredBy() {\n    const numReferredBy = (\n      this.props.item._links &&\n      this.props.item._links.referenced_by &&\n      this.props.item._links.referenced_by.length\n    );\n\n    return numReferredBy || 0;\n  }\n\n  /**\n   * @return string\n   */\n  getReferToTooltipText() {\n    const numReferTo = this.getNumReferTo();\n    return i18n.sprintf(\n      i18n._t('CampaignAdmin.LINKED_TO', 'Requires %s item(s)'),\n      formatWrittenNumber(numReferTo)\n    );\n  }\n\n  /**\n   * @return string\n   */\n  getReferredByTooltipText() {\n    const numReferredBy = this.getNumReferredBy();\n\n    return i18n.sprintf(\n      i18n._t('CampaignAdmin.LINKED_FROM', 'Required by %s item(s)'),\n      formatWrittenNumber(numReferredBy)\n    );\n  }\n\n  render() {\n    let thumbnail = null;\n    const badge = {};\n    const item = this.props.item;\n    const campaign = this.props.campaign;\n\n    // @todo customise these status messages for already-published changesets\n\n    // Change badge. If the campaign has been published,\n    // don't apply a badge at all\n    if (campaign.State === 'open') {\n      switch (item.ChangeType) {\n        case 'created':\n          badge.className = 'label label-warning list-group-item__status';\n          badge.Title = i18n._t('CampaignAdmin.DRAFT', 'Draft');\n          break;\n        case 'modified':\n          badge.className = 'label label-warning list-group-item__status';\n          badge.Title = i18n._t('CampaignAdmin.MODIFIED', 'Modified');\n          break;\n        case 'deleted':\n          badge.className = 'label label-error list-group-item__status';\n          badge.Title = i18n._t('CampaignAdmin.REMOVED', 'Removed');\n          break;\n        case 'none':\n        default:\n          badge.className = 'label label-success list-group-item__status';\n          badge.Title = i18n._t('CampaignAdmin.NO_CHANGES', 'No changes');\n          break;\n      }\n    }\n\n    const links = this.renderLinks();\n\n    if (item.Thumbnail) {\n      thumbnail = (\n        <span className=\"list-group-item__thumbnail\">\n          <img alt={item.Title} src={item.Thumbnail} />\n        </span>\n      );\n    }\n\n    return (\n      <div className=\"fill-width\">\n        {thumbnail}\n        <div className=\"list-group-item__details\">\n          <h4 className=\"list-group-item__heading\">{item.Title}</h4>\n          {links}\n          {badge.className && badge.Title &&\n            <span className={badge.className}>{badge.Title}</span>\n          }\n        </div>\n      </div>\n    );\n  }\n\n  renderLinks() {\n    const numReferTo = this.getNumReferTo();\n    const numReferredBy = this.getNumReferredBy();\n\n    const tooltipTexts = [];\n    if (numReferTo > 0) {\n      tooltipTexts.push(this.getReferToTooltipText());\n    }\n    if (numReferredBy > 0) {\n      tooltipTexts.push(i18n.sprintf(\n        tooltipTexts.length === 0 ?\n          this.getReferredByTooltipText() :\n          this.getReferredByTooltipText().toLocaleLowerCase(),\n        formatWrittenNumber(numReferredBy)\n      ));\n    }\n\n    const tooltip = (<Tooltip id={`campaign-tooltip-${this.props.item.ID}`}>{\n      tooltipTexts.join(', ')\n    }</Tooltip>);\n\n    let links = null;\n    if ((this.props.selected && numReferTo + numReferredBy > 0) || this.props.isLinked) {\n      const linksClasses = [\n        'list-group-item__info',\n        'campaign-admin__item-links',\n        this.props.isLinked ?\n          'campaign-admin__item-links--is-linked' :\n          'campaign-admin__item-links--has-links',\n      ];\n\n      links = (\n        <div className={linksClasses.join(' ')}>\n          <OverlayTrigger placement=\"left\" overlay={tooltip}>\n            <span>\n              <span className=\"campaign-admin__item-links__number\">\n                {numReferTo + numReferredBy}\n              </span>\n              <span className=\"font-icon-link\" />\n            </span>\n          </OverlayTrigger>\n        </div>\n      );\n    }\n\n    return links;\n  }\n}\n\nCampaignAdminItem.propTypes = {\n  campaign: React.PropTypes.object.isRequired,\n  item: React.PropTypes.object.isRequired,\n  isLinked: React.PropTypes.bool,\n};\n\nexport default CampaignAdminItem;\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/containers/CampaignAdmin/CampaignAdminItem.js","import React from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport * as breadcrumbsActions from 'state/breadcrumbs/BreadcrumbsActions';\nimport * as recordActions from 'state/records/RecordsActions';\nimport * as campaignActions from 'state/campaign/CampaignActions';\nimport SilverStripeComponent from 'lib/SilverStripeComponent';\nimport Accordion from 'components/Accordion/Accordion';\nimport AccordionBlock from 'components/Accordion/AccordionBlock';\nimport ListGroupItem from 'components/ListGroup/ListGroupItem';\nimport Toolbar from 'components/Toolbar/Toolbar';\nimport FormAction from 'components/FormAction/FormAction';\nimport CampaignAdminItem from './CampaignAdminItem';\nimport Breadcrumb from 'components/Breadcrumb/Breadcrumb';\nimport Preview from 'components/Preview/Preview';\nimport i18n from 'i18n';\n\nconst sectionConfigKey = 'SilverStripe\\\\CMS\\\\Controllers\\\\CMSPagesController';\n\n/**\n * Represents a campaign list view\n */\nclass CampaignAdminList extends SilverStripeComponent {\n\n  constructor(props) {\n    super(props);\n\n    this.handlePublish = this.handlePublish.bind(this);\n    this.handleItemSelected = this.handleItemSelected.bind(this);\n    this.setBreadcrumbs = this.setBreadcrumbs.bind(this);\n    this.handleCloseItem = this.handleCloseItem.bind(this);\n  }\n\n  componentDidMount() {\n    const fetchURL = this.props.itemListViewEndpoint.url.replace(/:id/, this.props.campaignId);\n    super.componentDidMount();\n    this.setBreadcrumbs();\n\n    // Only load record if not already present\n    if (!Object.keys(this.props.record).length) {\n      this.props.recordActions\n        .fetchRecord(this.props.treeClass, 'get', fetchURL)\n        .then(this.setBreadcrumbs);\n    }\n  }\n\n  /**\n   * Update breadcrumbs for this view\n   */\n  setBreadcrumbs() {\n    // Setup breadcrumbs if record is loaded\n    if (!this.props.record) {\n      return;\n    }\n\n    // Push breadcrumb\n    const breadcrumbs = [{\n      text: i18n._t('CampaignAdmin.CAMPAIGN', 'Campaigns'),\n      href: this.props.sectionConfig.url,\n    }];\n    breadcrumbs.push({\n      text: this.props.record.Name,\n      href: `${this.props.sectionConfig.url}/set/${this.props.campaignId}/show`,\n    });\n\n    this.props.breadcrumbsActions.setBreadcrumbs(breadcrumbs);\n  }\n\n  getSelectedItem() {\n    const itemId = this.props.campaign.changeSetItemId;\n    const items = this.getItems() || [];\n    let selected = null;\n\n    if (itemId) {\n      selected = items.find(item => itemId === item.ID);\n    }\n\n    if (!selected && items.length > 0) {\n      selected = items[0];\n    }\n\n    return selected;\n  }\n\n  /**\n   * Renders a list of items in a Campaign.\n   *\n   * @return object\n   */\n  render() {\n    let itemId = this.props.campaign.changeSetItemId;\n\n    let itemLinks = null;\n    const selectedClass = (!itemId) ? 'campaign-admin__campaign--hide-preview' : '';\n    const campaignId = this.props.campaignId;\n    const campaign = this.props.record;\n\n    // Trigger different layout when preview is enabled\n    const itemGroups = this.groupItemsForSet();\n\n    // Get items in this set\n    let accordionBlocks = [];\n\n    const selectedItem = this.getSelectedItem();\n    const selectedItemsLinkedTo = (\n      selectedItem && selectedItem._links && selectedItem._links.references\n      ) || [];\n    const selectedItemsLinkedFrom = (\n      selectedItem && selectedItem._links && selectedItem._links.referenced_by\n      ) || [];\n\n    Object.keys(itemGroups).forEach(className => {\n      const group = itemGroups[className];\n      const groupCount = group.items.length;\n\n      let listGroupItems = [];\n      let title = `${groupCount} ${groupCount === 1 ? group.singular : group.plural}`;\n      let groupid = `Set_${campaignId}_Group_${className}`;\n\n      // Create items for this group\n      group.items.forEach(item => {\n        // Auto-select first item\n        if (!itemId) {\n          itemId = item.ID;\n        }\n        const selected = (itemId === item.ID);\n\n        // Check links\n        if (selected && item._links) {\n          itemLinks = item._links;\n        }\n\n        // Add extra css class for published items\n        const itemClassNames = [];\n        if (item.ChangeType === 'none' || campaign.State === 'published') {\n          itemClassNames.push('list-group-item--inactive');\n        }\n        if (selected) {\n          itemClassNames.push('active');\n        }\n\n        let isLinked = !!selectedItemsLinkedTo.find(\n            linkToObj => linkToObj.ChangeSetItemID === parseInt(item.ID, 10));\n\n        isLinked = isLinked || selectedItemsLinkedFrom.find(linkFromObj => (\n          linkFromObj.ChangeSetItemID === item.ID\n        ));\n\n        listGroupItems.push(\n          <ListGroupItem\n            key={item.ID}\n            className={itemClassNames.join(' ')}\n            handleClick={this.handleItemSelected}\n            handleClickArg={item.ID}\n          >\n            <CampaignAdminItem\n              item={item}\n              campaign={this.props.record}\n              selected={selected}\n              isLinked={isLinked}\n            />\n          </ListGroupItem>\n        );\n      });\n\n      // Merge into group\n      accordionBlocks.push(\n        <AccordionBlock key={groupid} groupid={groupid} title={title}>\n          {listGroupItems}\n        </AccordionBlock>\n      );\n    });\n\n    // Set body\n    const pagesLink = [\n      this.props.config.absoluteBaseUrl,\n      this.props.config.sections.find((section) => section.name === sectionConfigKey).url,\n    ].join('');\n\n    const body = accordionBlocks.length\n      ? (<Accordion>{accordionBlocks}</Accordion>)\n      : (\n        <div className=\"alert alert-warning\" role=\"alert\">\n          <strong>This campaign is empty.</strong> You can add items to a campaign by\n          selecting <em>Add to campaign</em> from within the <em>More Options </em>\n          popup on <a href={pagesLink}>pages</a> and files.\n        </div>\n      );\n    const bodyClass = [\n      'panel', 'panel--padded', 'panel--scrollable', 'flexbox-area-grow',\n    ];\n\n    return (\n      <div className={`fill-width campaign-admin__campaign ${selectedClass}`}>\n        <div className=\"fill-height campaign-admin__campaign-items\" aria-expanded=\"true\">\n          <Toolbar showBackButton handleBackButtonClick={this.props.handleBackButtonClick}>\n            <Breadcrumb multiline />\n          </Toolbar>\n          <div className={bodyClass.join(' ')}>\n            {body}\n          </div>\n          <div className=\"toolbar toolbar--south\">\n            {this.renderButtonToolbar()}\n          </div>\n        </div>\n        <Preview itemLinks={itemLinks} itemId={itemId} onBack={this.handleCloseItem} />\n      </div>\n    );\n  }\n\n  /**\n   * Callback for items being clicked on\n   *\n   * @param {object} event\n   * @param {number} itemId\n   */\n  handleItemSelected(event, itemId) {\n    this.props.campaignActions.selectChangeSetItem(itemId);\n  }\n\n  handleCloseItem() {\n    this.props.campaignActions.selectChangeSetItem(null);\n  }\n\n  renderButtonToolbar() {\n    const items = this.getItems();\n\n    // let itemSummaryLabel;\n    if (!items || !items.length) {\n      return <div className=\"btn-toolbar\"></div>;\n    }\n\n    // let itemSummaryLabel = i18n.sprintf(\n    //   items.length === 1\n    //     ? i18n._t('CampaignAdmin.ITEM_SUMMARY_SINGULAR')\n    //     : i18n._t('CampaignAdmin.ITEM_SUMMARY_PLURAL'),\n    //   items.length\n    // );\n\n    let actionProps = {};\n\n    if (this.props.record.State === 'open') {\n      actionProps = Object.assign(actionProps, {\n        title: i18n._t('CampaignAdmin.PUBLISHCAMPAIGN'),\n        buttonStyle: 'primary',\n        loading: this.props.campaign.isPublishing,\n        handleClick: this.handlePublish,\n        icon: 'rocket',\n      });\n    } else if (this.props.record.State === 'published') {\n      // TODO Implement \"revert\" feature\n      actionProps = Object.assign(actionProps, {\n        title: i18n._t('CampaignAdmin.REVERTCAMPAIGN'),\n        buttonStyle: 'secondary-outline',\n        icon: 'back-in-time',\n        disabled: true,\n      });\n    }\n\n    // TODO Fix indicator positioning\n    // const itemCountIndicator = (\n    //   <span className=\"text-muted\">\n    //     <span className=\"label label-warning label--empty\">&nbsp;</span>\n    //     &nbsp;{itemSummaryLabel}\n    //   </span>\n    // );\n\n    return (\n      <div className=\"btn-toolbar\">\n        <FormAction {...actionProps} />\n      </div>\n    );\n  }\n\n  /**\n   * @return {array}\n   */\n  getItems() {\n    if (this.props.record && this.props.record._embedded) {\n      return this.props.record._embedded.items;\n    }\n\n    return null;\n  }\n\n  /**\n   * Group items for changeset display\n   *\n   * @return {object}\n   */\n  groupItemsForSet() {\n    const groups = {};\n    const items = this.getItems();\n    if (!items) {\n      return groups;\n    }\n\n    // group by whatever\n    items.forEach(item => {\n      // Create new group if needed\n      const classname = item.BaseClass;\n\n      if (!groups[classname]) {\n        groups[classname] = {\n          singular: item.Singular,\n          plural: item.Plural,\n          items: [],\n        };\n      }\n\n      // Push items\n      groups[classname].items.push(item);\n    });\n\n    return groups;\n  }\n\n  handlePublish(e) {\n    e.preventDefault();\n    this.props.campaignActions.publishCampaign(\n      this.props.publishApi,\n      this.props.treeClass,\n      this.props.campaignId\n    );\n  }\n\n}\n\nCampaignAdminList.propTypes = {\n  campaign: React.PropTypes.shape({\n    isPublishing: React.PropTypes.bool.isRequired,\n    changeSetItemId: React.PropTypes.number,\n  }),\n  breadcrumbsActions: React.PropTypes.object.isRequired,\n  campaignActions: React.PropTypes.object.isRequired,\n  publishApi: React.PropTypes.func.isRequired,\n  record: React.PropTypes.object.isRequired,\n  recordActions: React.PropTypes.object.isRequired,\n  sectionConfig: React.PropTypes.object.isRequired,\n  handleBackButtonClick: React.PropTypes.func,\n};\n\nfunction mapStateToProps(state, ownProps) {\n  // Find record specific to this item\n  let record = null;\n  const treeClass = ownProps.sectionConfig.treeClass;\n  if (state.records && state.records[treeClass] && ownProps.campaignId) {\n    record = state.records[treeClass][parseInt(ownProps.campaignId, 10)];\n  }\n  return {\n    config: state.config,\n    record: record || {},\n    campaign: state.campaign,\n    treeClass,\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    breadcrumbsActions: bindActionCreators(breadcrumbsActions, dispatch),\n    recordActions: bindActionCreators(recordActions, dispatch),\n    campaignActions: bindActionCreators(campaignActions, dispatch),\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CampaignAdminList);\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/containers/CampaignAdmin/CampaignAdminList.js","import ACTION_TYPES from './CampaignActionTypes';\nimport RECORD_ACTION_TYPES from 'state/records/RecordsActionTypes';\n\n\n/**\n * Set selected changeset item\n *\n * @param {number} changeSetItemId ID of changesetitem in the currently visible changeset\n * @return {object}\n */\nexport function selectChangeSetItem(changeSetItemId) {\n  return {\n    type: ACTION_TYPES.SET_CAMPAIGN_SELECTED_CHANGESETITEM,\n    payload: { changeSetItemId },\n  };\n}\n\n/**\n * Show specified campaign set\n *\n * @param {number} campaignId ID of the Campaign to show.\n * @param {string} view The view mode to display the Campaign in.\n * @return {function}\n */\nexport function showCampaignView(campaignId, view) {\n  return (dispatch) => {\n    dispatch({\n      type: ACTION_TYPES.SET_CAMPAIGN_ACTIVE_CHANGESET,\n      payload: { campaignId, view },\n    });\n  };\n}\n\n/**\n * Publish a campaign and all its items\n *\n * @param {Function} publishApi See lib/Backend\n * @param {string} recordType\n * @param {number} campaignId\n * @return {Object}\n */\nexport function publishCampaign(publishApi, recordType, campaignId) {\n  return (dispatch) => {\n    dispatch({\n      type: ACTION_TYPES.PUBLISH_CAMPAIGN_REQUEST,\n      payload: { campaignId },\n    });\n\n    publishApi({ id: campaignId })\n      .then((data) => {\n        dispatch({\n          type: ACTION_TYPES.PUBLISH_CAMPAIGN_SUCCESS,\n          payload: { campaignId },\n        });\n        dispatch({\n          type: RECORD_ACTION_TYPES.FETCH_RECORD_SUCCESS,\n          payload: { recordType, data },\n        });\n      })\n      .catch((error) => {\n        dispatch({\n          type: ACTION_TYPES.PUBLISH_CAMPAIGN_FAILURE,\n          payload: { error },\n        });\n      });\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/state/campaign/CampaignActions.js","import deepFreeze from 'deep-freeze-strict';\nimport ACTION_TYPES from './CampaignActionTypes';\n\nconst initialState = deepFreeze({\n  campaignId: null,\n  changeSetItemId: null,\n  isPublishing: false,\n  view: null,\n});\n\nfunction reducer(state = initialState, action) {\n  switch (action.type) {\n\n    case ACTION_TYPES.SET_CAMPAIGN_SELECTED_CHANGESETITEM:\n      return deepFreeze(Object.assign({}, state, {\n        changeSetItemId: action.payload.changeSetItemId,\n      }));\n\n    case ACTION_TYPES.SET_CAMPAIGN_ACTIVE_CHANGESET:\n      return deepFreeze(Object.assign({}, state, {\n        campaignId: action.payload.campaignId,\n        view: action.payload.view,\n        changeSetItemId: null,\n      }));\n\n    case ACTION_TYPES.PUBLISH_CAMPAIGN_REQUEST:\n      return deepFreeze(Object.assign({}, state, {\n        isPublishing: true,\n      }));\n\n    case ACTION_TYPES.PUBLISH_CAMPAIGN_SUCCESS:\n    case ACTION_TYPES.PUBLISH_CAMPAIGN_FAILURE:\n      return deepFreeze(Object.assign({}, state, {\n        isPublishing: false,\n      }));\n\n    default:\n      return state;\n\n  }\n}\n\nexport default reducer;\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/state/campaign/CampaignReducer.js","module.exports = Accordion;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"Accordion\"\n// module id = 18\n// module chunks = 0","module.exports = AccordionBlock;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"AccordionBlock\"\n// module id = 19\n// module chunks = 0","module.exports = Backend;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"Backend\"\n// module id = 20\n// module chunks = 0","module.exports = Config;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"Config\"\n// module id = 21\n// module chunks = 0","module.exports = DeepFreezeStrict;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"DeepFreezeStrict\"\n// module id = 22\n// module chunks = 0","module.exports = FormBuilderLoader;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"FormBuilderLoader\"\n// module id = 23\n// module chunks = 0","module.exports = ListGroupItem;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ListGroupItem\"\n// module id = 24\n// module chunks = 0","module.exports = Preview;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"Preview\"\n// module id = 25\n// module chunks = 0","module.exports = ReactBootstrap;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ReactBootstrap\"\n// module id = 26\n// module chunks = 0","module.exports = ReactRouteRegister;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ReactRouteRegister\"\n// module id = 27\n// module chunks = 0","module.exports = RecordsActionTypes;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"RecordsActionTypes\"\n// module id = 28\n// module chunks = 0","module.exports = RecordsActions;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"RecordsActions\"\n// module id = 29\n// module chunks = 0","module.exports = ReducerRegister;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ReducerRegister\"\n// module id = 30\n// module chunks = 0","module.exports = ReduxForm;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ReduxForm\"\n// module id = 31\n// module chunks = 0","module.exports = formatWrittenNumber;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"formatWrittenNumber\"\n// module id = 32\n// module chunks = 0"],"sourceRoot":""}