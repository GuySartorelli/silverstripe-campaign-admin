<<<<<<< HEAD
!function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=12)}([function(e,t){e.exports=React},function(e,t){e.exports=SilverStripeComponent},function(e,t){e.exports=i18n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={SET_CAMPAIGN_ACTIVE_CHANGESET:"SET_CAMPAIGN_ACTIVE_CHANGESET",SET_CAMPAIGN_SELECTED_CHANGESETITEM:"SET_CAMPAIGN_SELECTED_CHANGESETITEM",PUBLISH_CAMPAIGN_REQUEST:"PUBLISH_CAMPAIGN_REQUEST",PUBLISH_CAMPAIGN_SUCCESS:"PUBLISH_CAMPAIGN_SUCCESS",PUBLISH_CAMPAIGN_FAILURE:"PUBLISH_CAMPAIGN_FAILURE"}},function(e,t){e.exports=Breadcrumb},function(e,t){e.exports=BreadcrumbsActions},function(e,t){e.exports=FormAction},function(e,t){e.exports=ReactRedux},function(e,t){e.exports=ReactRouter},function(e,t){e.exports=Redux},function(e,t){e.exports=Toolbar},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var r=n(8),i=n(21),o=a(i),s=n(30),l=a(s),u=n(27),c=a(u),p=n(13),d=a(p),f=n(17),m=a(f);document.addEventListener("DOMContentLoaded",function(){var e=o.default.getSection("SilverStripe\\CampaignAdmin\\CampaignAdmin");c.default.add({path:e.url,component:(0,r.withRouter)(d.default),childRoutes:[{path:":type/:id/:view",component:d.default},{path:"set/:id/:view",component:d.default}]}),l.default.add("campaign",m.default)})},function(e,t,n){"use strict";n(11)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return{config:e.config,campaignId:e.campaign.campaignId,view:e.campaign.view,breadcrumbs:e.breadcrumbs,sectionConfig:e.config.sections.find(function(e){return e.name===j}),securityId:e.config.SecurityID}}function l(e){return{breadcrumbsActions:(0,m.bindActionCreators)(_,e)}}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),p=n(0),d=a(p),f=n(7),m=n(9),h=n(8),g=n(20),b=a(g),y=n(5),_=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(y),v=n(4),C=a(v),E=n(1),A=a(E),I=n(6),k=a(I),T=n(2),P=a(T),S=n(10),w=a(S),N=n(23),B=a(N),R=n(15),O=a(R),j="SilverStripe\\CampaignAdmin\\CampaignAdmin",M=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.publishApi=b.default.createEndpointFetcher({url:n.props.sectionConfig.publishEndpoint.url,method:n.props.sectionConfig.publishEndpoint.method,defaultData:{SecurityID:n.props.securityId},payloadSchema:{id:{urlReplacement:":id",remove:!0}}}),n.handleBackButtonClick=n.handleBackButtonClick.bind(n),n.handleCreateCampaignSubmit=n.handleCreateCampaignSubmit.bind(n),n.handleFormAction=n.handleFormAction.bind(n),n}return o(t,e),c(t,[{key:"componentWillMount",value:function(){0===this.props.breadcrumbs.length&&this.setBreadcrumbs(this.props.params.view,this.props.params.id)}},{key:"componentWillReceiveProps",value:function(e){(this.props.params.id!==e.params.id||this.props.params.view!==e.params.view)&&this.setBreadcrumbs(e.params.view,e.params.id)}},{key:"setBreadcrumbs",value:function(e,t){var n=[{text:P.default._t("CampaignAdmin.CAMPAIGN","Campaigns"),href:this.props.sectionConfig.url}];switch(e){case"show":break;case"edit":n.push({text:P.default._t("CampaignAdmin.EDIT_CAMPAIGN","Editing Campaign"),href:this.getActionRoute(t,e)});break;case"create":n.push({text:P.default._t("CampaignAdmin.ADD_CAMPAIGN","Add Campaign"),href:this.getActionRoute(t,e)})}this.props.breadcrumbsActions.setBreadcrumbs(n)}},{key:"handleBackButtonClick",value:function(e){if(this.props.breadcrumbs.length>1){var t=this.props.breadcrumbs[this.props.breadcrumbs.length-2];t&&t.href&&(e.preventDefault(),this.props.router.push(t.href))}}},{key:"handleCreateCampaignSubmit",value:function(e,t,n){var a=this,r=n();if(!r)throw new Error("Promise was not returned for submitting");return r.then(function(e){var n=e.errors&&e.errors.length>0;if("action_save"===t&&!n){var r=a.props.sectionConfig.url,i=e.record.id;a.props.router.push(r+"/set/"+i+"/edit")}return e})}},{key:"handleFormAction",value:function(e){if("action_cancel"===e.currentTarget.name){var t=this.props.sectionConfig.url;this.props.router.push(t),e.preventDefault()}}},{key:"render",value:function(){var e=null;switch(this.props.params.view){case"show":e=this.renderItemListView();break;case"edit":e=this.renderDetailEditView();break;case"create":e=this.renderCreateView();break;default:e=this.renderIndexView()}return e}},{key:"renderIndexView",value:function(){var e=this.props.sectionConfig.form.EditForm.schemaUrl,t={title:P.default._t("CampaignAdmin.ADDCAMPAIGN"),icon:"plus",handleClick:this.addCampaign.bind(this)},n={createFn:this.campaignListCreateFn.bind(this),schemaUrl:e};return d.default.createElement("div",{className:"fill-height","aria-expanded":"true"},d.default.createElement(w.default,null,d.default.createElement(C.default,{multiline:!0})),d.default.createElement("div",{className:"panel panel--padded panel--scrollable flexbox-area-grow"},d.default.createElement("div",{className:"toolbar toolbar--content"},d.default.createElement("div",{className:"btn-toolbar"},d.default.createElement(k.default,t))),d.default.createElement(B.default,n)))}},{key:"renderItemListView",value:function(){var e={sectionConfig:this.props.sectionConfig,campaignId:this.props.params.id,itemListViewEndpoint:this.props.sectionConfig.itemListViewEndpoint,publishApi:this.publishApi,handleBackButtonClick:this.handleBackButtonClick.bind(this)};return d.default.createElement(O.default,e)}},{key:"renderDetailEditView",value:function(){if(this.props.params.id<=0)return this.renderCreateView();var e=this.props.sectionConfig.form.campaignEditForm.schemaUrl,t=e+"/"+this.props.params.id;return d.default.createElement("div",{className:"fill-height"},d.default.createElement(w.default,{showBackButton:!0,handleBackButtonClick:this.handleBackButtonClick},d.default.createElement(C.default,{multiline:!0})),d.default.createElement("div",{className:"panel panel--padded panel--scrollable flexbox-area-grow form--inline"},d.default.createElement(B.default,{handleAction:this.handleFormAction,schemaUrl:t})))}},{key:"renderCreateView",value:function(){var e=this.props.sectionConfig.form.campaignCreateForm.schemaUrl;return d.default.createElement("div",{className:"fill-height"},d.default.createElement(w.default,{showBackButton:!0,handleBackButtonClick:this.handleBackButtonClick},d.default.createElement(C.default,{multiline:!0})),d.default.createElement("div",{className:"panel panel--padded panel--scrollable flexbox-area-grow form--inline"},d.default.createElement(B.default,{handleSubmit:this.handleCreateCampaignSubmit,handleAction:this.handleFormAction,schemaUrl:e})))}},{key:"campaignEditCreateFn",value:function(e,t){var n=this,a=this.props.sectionConfig.url;if("action_cancel"===t.name){var r=Object.assign({},t,{handleClick:function(e){e.preventDefault(),n.props.router.push(a)}});return d.default.createElement(e,u({key:t.id},r))}return d.default.createElement(e,u({key:t.id},t))}},{key:"campaignAddCreateFn",value:function(e,t){var n=this,a=this.props.sectionConfig.url;if("action_cancel"===t.name){var r=Object.assign({},t,{handleClick:function(e){e.preventDefault(),n.props.router.push(a)}});return d.default.createElement(e,u({key:t.name},r))}return d.default.createElement(e,u({key:t.name},t))}},{key:"campaignListCreateFn",value:function(e,t){var n=this,a=this.props.sectionConfig.url;if("GridField"===t.schemaComponent){var r=Object.assign({},t,{data:Object.assign({},t.data,{handleDrillDown:function(e,t){n.props.router.push(a+"/set/"+t.ID+"/show")},handleEditRecord:function(e,t){n.props.router.push(a+"/set/"+t+"/edit")}})});return d.default.createElement(e,u({key:r.name},r))}return d.default.createElement(e,u({key:t.name},t))}},{key:"addCampaign",value:function(){var e=this.getActionRoute(0,"create");this.props.router.push(e)}},{key:"getActionRoute",value:function(e,t){return this.props.sectionConfig.url+"/set/"+e+"/"+t}}]),t}(A.default);M.propTypes={breadcrumbsActions:d.default.PropTypes.object.isRequired,campaignId:d.default.PropTypes.string,sectionConfig:d.default.PropTypes.shape({publishEndpoint:d.default.PropTypes.shape({url:d.default.PropTypes.string,method:d.default.PropTypes.string}),form:d.default.PropTypes.shape({EditForm:d.default.PropTypes.shape({schemaUrl:d.default.PropTypes.string}),campaignEditForm:d.default.PropTypes.shape({schemaUrl:d.default.PropTypes.string}),campaignCreateForm:d.default.PropTypes.shape({schemaUrl:d.default.PropTypes.string})})}),securityId:d.default.PropTypes.string.isRequired,view:d.default.PropTypes.string},t.default=(0,h.withRouter)((0,f.connect)(s,l)(M))},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),u=a(l),c=n(1),p=a(c),d=n(2),f=a(d),m=n(26),h=n(31),g=a(h),b=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"getNumReferTo",value:function(){return this.props.item._links&&this.props.item._links.references&&this.props.item._links.references.length||0}},{key:"getNumReferredBy",value:function(){return this.props.item._links&&this.props.item._links.referenced_by&&this.props.item._links.referenced_by.length||0}},{key:"getReferToTooltipText",value:function(){var e=this.getNumReferTo();return f.default.sprintf(f.default._t("CampaignAdmin.LINKED_TO","Requires %s item(s)"),(0,g.default)(e))}},{key:"getReferredByTooltipText",value:function(){var e=this.getNumReferredBy();return f.default.sprintf(f.default._t("CampaignAdmin.LINKED_FROM","Required by %s item(s)"),(0,g.default)(e))}},{key:"render",value:function(){var e=null,t={},n=this.props.item;if("open"===this.props.campaign.State)switch(n.ChangeType){case"created":t.className="label label-warning list-group-item__status",t.Title=f.default._t("CampaignAdmin.DRAFT","Draft");break;case"modified":t.className="label label-warning list-group-item__status",t.Title=f.default._t("CampaignAdmin.MODIFIED","Modified");break;case"deleted":t.className="label label-error list-group-item__status",t.Title=f.default._t("CampaignAdmin.REMOVED","Removed");break;case"none":default:t.className="label label-success list-group-item__status",t.Title=f.default._t("CampaignAdmin.NO_CHANGES","No changes")}var a=this.renderLinks();return n.Thumbnail&&(e=u.default.createElement("span",{className:"list-group-item__thumbnail"},u.default.createElement("img",{alt:n.Title,src:n.Thumbnail}))),u.default.createElement("div",{className:"fill-width"},e,u.default.createElement("div",{className:"list-group-item__details"},u.default.createElement("h4",{className:"list-group-item__heading"},n.Title),a,t.className&&t.Title&&u.default.createElement("span",{className:t.className},t.Title)))}},{key:"renderLinks",value:function(){var e=this.getNumReferTo(),t=this.getNumReferredBy(),n=[];e>0&&n.push(this.getReferToTooltipText()),t>0&&n.push(f.default.sprintf(0===n.length?this.getReferredByTooltipText():this.getReferredByTooltipText().toLocaleLowerCase(),(0,g.default)(t)));var a=u.default.createElement(m.Tooltip,{id:"campaign-tooltip-"+this.props.item.ID},n.join(", ")),r=null;if(this.props.selected&&e+t>0||this.props.isLinked){var i=["list-group-item__info","campaign-admin__item-links",this.props.isLinked?"campaign-admin__item-links--is-linked":"campaign-admin__item-links--has-links"];r=u.default.createElement("div",{className:i.join(" ")},u.default.createElement(m.OverlayTrigger,{placement:"left",overlay:a},u.default.createElement("span",null,u.default.createElement("span",{className:"campaign-admin__item-links__number"},e+t),u.default.createElement("span",{className:"font-icon-link"}))))}return r}}]),t}(p.default);b.propTypes={campaign:u.default.PropTypes.object.isRequired,item:u.default.PropTypes.object.isRequired,isLinked:u.default.PropTypes.bool},t.default=b},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){var n=null,a=t.sectionConfig.treeClass;return e.records&&e.records[a]&&t.campaignId&&(n=e.records[a][parseInt(t.campaignId,10)]),{config:e.config,record:n||{},campaign:e.campaign,treeClass:a}}function u(e){return{breadcrumbsActions:(0,m.bindActionCreators)(b,e),recordActions:(0,m.bindActionCreators)(_,e),campaignActions:(0,m.bindActionCreators)(C,e)}}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),p=function e(t,n,a){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,a)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(a):void 0},d=n(0),f=r(d),m=n(9),h=n(7),g=n(5),b=a(g),y=n(29),_=a(y),v=n(16),C=a(v),E=n(1),A=r(E),I=n(18),k=r(I),T=n(19),P=r(T),S=n(24),w=r(S),N=n(10),B=r(N),R=n(6),O=r(R),j=n(14),M=r(j),x=n(4),D=r(x),L=n(25),G=r(L),U=n(2),F=r(U),H=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handlePublish=n.handlePublish.bind(n),n.handleItemSelected=n.handleItemSelected.bind(n),n.setBreadcrumbs=n.setBreadcrumbs.bind(n),n.handleCloseItem=n.handleCloseItem.bind(n),n}return s(t,e),c(t,[{key:"componentDidMount",value:function(){var e=this.props.itemListViewEndpoint.url.replace(/:id/,this.props.campaignId);p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.setBreadcrumbs(),Object.keys(this.props.record).length||this.props.recordActions.fetchRecord(this.props.treeClass,"get",e).then(this.setBreadcrumbs)}},{key:"setBreadcrumbs",value:function(){if(this.props.record){var e=[{text:F.default._t("CampaignAdmin.CAMPAIGN","Campaigns"),href:this.props.sectionConfig.url}];e.push({text:this.props.record.Name,href:this.props.sectionConfig.url+"/set/"+this.props.campaignId+"/show"}),this.props.breadcrumbsActions.setBreadcrumbs(e)}}},{key:"getSelectedItem",value:function(){var e=this.props.campaign.changeSetItemId,t=this.getItems()||[],n=null;return e&&(n=t.find(function(t){return e===t.ID})),!n&&t.length>0&&(n=t[0]),n}},{key:"render",value:function(){var e=this,t=this.props.campaign.changeSetItemId,n=null,a=t?"":"campaign-admin__campaign--hide-preview",r=this.props.campaignId,i=this.props.record,o=this.groupItemsForSet(),s=[],l=this.getSelectedItem(),u=l&&l._links&&l._links.references||[],c=l&&l._links&&l._links.referenced_by||[];Object.keys(o).forEach(function(a){var l=o[a],p=l.items.length,d=[],m=p+" "+(1===p?l.singular:l.plural),h="Set_"+r+"_Group_"+a;l.items.forEach(function(a){t||(t=a.ID);var r=t===a.ID;r&&a._links&&(n=a._links);var o=[];"none"!==a.ChangeType&&"published"!==i.State||o.push("list-group-item--inactive"),r&&o.push("active");var s=!!u.find(function(e){return e.ChangeSetItemID===parseInt(a.ID,10)});s=s||c.find(function(e){return e.ChangeSetItemID===a.ID}),d.push(f.default.createElement(w.default,{key:a.ID,className:o.join(" "),handleClick:e.handleItemSelected,handleClickArg:a.ID},f.default.createElement(M.default,{item:a,campaign:e.props.record,selected:r,isLinked:s})))}),s.push(f.default.createElement(P.default,{key:h,groupid:h,title:m},d))});var p=[this.props.config.absoluteBaseUrl,this.props.config.sections.find(function(e){return"SilverStripe\\CMS\\Controllers\\CMSPagesController"===e.name}).url].join(""),d=s.length?f.default.createElement(k.default,null,s):f.default.createElement("div",{className:"alert alert-warning",role:"alert"},f.default.createElement("strong",null,"This campaign is empty.")," You can add items to a campaign by selecting ",f.default.createElement("em",null,"Add to campaign")," from within the ",f.default.createElement("em",null,"More Options "),"popup on ",f.default.createElement("a",{href:p},"pages")," and files."),m=["panel","panel--padded","panel--scrollable","flexbox-area-grow"];return f.default.createElement("div",{className:"fill-width campaign-admin__campaign "+a},f.default.createElement("div",{className:"fill-height campaign-admin__campaign-items","aria-expanded":"true"},f.default.createElement(B.default,{showBackButton:!0,handleBackButtonClick:this.props.handleBackButtonClick},f.default.createElement(D.default,{multiline:!0})),f.default.createElement("div",{className:m.join(" ")},d),f.default.createElement("div",{className:"toolbar toolbar--south"},this.renderButtonToolbar())),f.default.createElement(G.default,{itemLinks:n,itemId:t,onBack:this.handleCloseItem}))}},{key:"handleItemSelected",value:function(e,t){this.props.campaignActions.selectChangeSetItem(t)}},{key:"handleCloseItem",value:function(){this.props.campaignActions.selectChangeSetItem(null)}},{key:"renderButtonToolbar",value:function(){var e=this.getItems();if(!e||!e.length)return f.default.createElement("div",{className:"btn-toolbar"});var t={};return"open"===this.props.record.State?t=Object.assign(t,{title:F.default._t("CampaignAdmin.PUBLISHCAMPAIGN"),buttonStyle:"primary",loading:this.props.campaign.isPublishing,handleClick:this.handlePublish,icon:"rocket"}):"published"===this.props.record.State&&(t=Object.assign(t,{title:F.default._t("CampaignAdmin.REVERTCAMPAIGN"),buttonStyle:"secondary-outline",icon:"back-in-time",disabled:!0})),f.default.createElement("div",{className:"btn-toolbar"},f.default.createElement(O.default,t))}},{key:"getItems",value:function(){return this.props.record&&this.props.record._embedded?this.props.record._embedded.items:null}},{key:"groupItemsForSet",value:function(){var e={},t=this.getItems();return t?(t.forEach(function(t){var n=t.BaseClass;e[n]||(e[n]={singular:t.Singular,plural:t.Plural,items:[]}),e[n].items.push(t)}),e):e}},{key:"handlePublish",value:function(e){e.preventDefault(),this.props.campaignActions.publishCampaign(this.props.publishApi,this.props.treeClass,this.props.campaignId)}}]),t}(A.default);H.propTypes={campaign:f.default.PropTypes.shape({isPublishing:f.default.PropTypes.bool.isRequired,changeSetItemId:f.default.PropTypes.number}),breadcrumbsActions:f.default.PropTypes.object.isRequired,campaignActions:f.default.PropTypes.object.isRequired,publishApi:f.default.PropTypes.func.isRequired,record:f.default.PropTypes.object.isRequired,recordActions:f.default.PropTypes.object.isRequired,sectionConfig:f.default.PropTypes.object.isRequired,handleBackButtonClick:f.default.PropTypes.func},t.default=(0,h.connect)(l,u)(H)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){return{type:l.default.SET_CAMPAIGN_SELECTED_CHANGESETITEM,payload:{changeSetItemId:e}}}function i(e,t){return function(n){n({type:l.default.SET_CAMPAIGN_ACTIVE_CHANGESET,payload:{campaignId:e,view:t}})}}function o(e,t,n){return function(a){a({type:l.default.PUBLISH_CAMPAIGN_REQUEST,payload:{campaignId:n}}),e({id:n}).then(function(e){a({type:l.default.PUBLISH_CAMPAIGN_SUCCESS,payload:{campaignId:n}}),a({type:c.default.FETCH_RECORD_SUCCESS,payload:{recordType:t,data:e}})}).catch(function(e){a({type:l.default.PUBLISH_CAMPAIGN_FAILURE,payload:{error:e}})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.selectChangeSetItem=r,t.showCampaignView=i,t.publishCampaign=o;var s=n(3),l=a(s),u=n(28),c=a(u)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments[1];switch(t.type){case l.default.SET_CAMPAIGN_SELECTED_CHANGESETITEM:return(0,o.default)(Object.assign({},e,{changeSetItemId:t.payload.changeSetItemId}));case l.default.SET_CAMPAIGN_ACTIVE_CHANGESET:return(0,o.default)(Object.assign({},e,{campaignId:t.payload.campaignId,view:t.payload.view,changeSetItemId:null}));case l.default.PUBLISH_CAMPAIGN_REQUEST:return(0,o.default)(Object.assign({},e,{isPublishing:!0}));case l.default.PUBLISH_CAMPAIGN_SUCCESS:case l.default.PUBLISH_CAMPAIGN_FAILURE:return(0,o.default)(Object.assign({},e,{isPublishing:!1}));default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(22),o=a(i),s=n(3),l=a(s),u=(0,o.default)({campaignId:null,changeSetItemId:null,isPublishing:!1,view:null});t.default=r},function(e,t){e.exports=Accordion},function(e,t){e.exports=AccordionBlock},function(e,t){e.exports=Backend},function(e,t){e.exports=Config},function(e,t){e.exports=DeepFreezeStrict},function(e,t){e.exports=FormBuilderLoader},function(e,t){e.exports=ListGroupItem},function(e,t){e.exports=Preview},function(e,t){e.exports=ReactBootstrap},function(e,t){e.exports=ReactRouteRegister},function(e,t){e.exports=RecordsActionTypes},function(e,t){e.exports=RecordsActions},function(e,t){e.exports=ReducerRegister},function(e,t){e.exports=formatWrittenNumber}]);
=======
!function(e){function t(a){if(n[a])return n[a].exports
var r=n[a]={exports:{},id:a,loaded:!1}
return e[a].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={}
return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict"
n(1)},function(e,t,n){"use strict"
function a(e){return e&&e.__esModule?e:{default:e}}var r=n(2),i=n(3),o=a(i),l=n(4),s=a(l),u=n(5),c=a(u),p=n(6),d=a(p),f=n(29),m=a(f)
document.addEventListener("DOMContentLoaded",function(){var e=o.default.getSection("SilverStripe\\CampaignAdmin\\CampaignAdmin")
c.default.add({path:e.url,component:(0,r.withRouter)(d.default),childRoutes:[{path:":type/:id/:view",component:d.default},{path:"set/:id/:view",component:d.default}]}),s.default.add("campaign",m.default)

})},function(e,t){e.exports=ReactRouter},function(e,t){e.exports=Config},function(e,t){e.exports=ReducerRegister},function(e,t){e.exports=ReactRouteRegister},function(e,t,n){"use strict"
function a(e){if(e&&e.__esModule)return e
var t={}
if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])
return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")


return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t)
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){var n=e.config.sections.find(function(e){
return e.name===x}),a=n.form.campaignEditForm.schemaUrl+"/"+t.params.id,r=(0,h.formValueSelector)(a),i=r(e,"Name")
return{config:e.config,campaignId:e.campaign.campaignId,view:e.campaign.view,breadcrumbs:e.breadcrumbs,sectionConfig:n,securityId:e.config.SecurityID,title:i}}function u(e){return{breadcrumbsActions:(0,
g.bindActionCreators)(_,e)}}Object.defineProperty(t,"__esModule",{value:!0})
var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]
for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n]
a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),d=n(7),f=r(d),m=n(8),h=n(9),g=n(10),b=n(2),y=n(11),v=r(y),C=n(12),_=a(C),E=n(13),A=r(E),I=n(14),P=r(I),S=n(15),k=r(S),T=n(16),w=r(T),N=n(17),B=r(N),O=n(18),M=r(O),R=n(19),j=r(R),x="SilverStripe\\CampaignAdmin\\CampaignAdmin",G=function(e){
function t(e){i(this,t)
var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))
return n.publishApi=v.default.createEndpointFetcher({url:n.props.sectionConfig.publishEndpoint.url,method:n.props.sectionConfig.publishEndpoint.method,defaultData:{SecurityID:n.props.securityId},payloadSchema:{
id:{urlReplacement:":id",remove:!0}}}),n.handleBackButtonClick=n.handleBackButtonClick.bind(n),n.handleCreateCampaignSubmit=n.handleCreateCampaignSubmit.bind(n),n.handleFormAction=n.handleFormAction.bind(n),
n}return l(t,e),p(t,[{key:"componentWillMount",value:function e(){var t=this.props,n=t.breadcrumbs,a=t.title,r=t.params,i=r.view,o=r.id
0===n.length&&this.setBreadcrumbs(i,o,a)}},{key:"componentWillReceiveProps",value:function e(t){var n=t.title,a=t.params,r=a.id,i=a.view,o=this.props.params.id!==r||this.props.params.view!==i||this.props.title!==n


o&&this.setBreadcrumbs(i,r,n)}},{key:"setBreadcrumbs",value:function e(t,n,a){var r=[{text:w.default._t("CampaignAdmin.CAMPAIGN","Campaigns"),href:this.props.sectionConfig.url}]
switch(t){case"show":break
case"edit":r.push({text:a,href:this.getActionRoute(n,t)})
break
case"create":r.push({text:w.default._t("CampaignAdmin.ADD_CAMPAIGN","Add Campaign"),href:this.getActionRoute(n,t)})}this.props.breadcrumbsActions.setBreadcrumbs(r)}},{key:"handleBackButtonClick",value:function e(t){
if(this.props.breadcrumbs.length>1){var n=this.props.breadcrumbs[this.props.breadcrumbs.length-2]
n&&n.href&&(t.preventDefault(),this.props.router.push(n.href))}}},{key:"handleCreateCampaignSubmit",value:function e(t,n,a){var r=this,i=a()
if(!i)throw new Error("Promise was not returned for submitting")
return i.then(function(e){var t=e.errors&&e.errors.length>0
if("action_save"===n&&!t){var a=r.props.sectionConfig.url,i=e.record.id
r.props.router.push(a+"/set/"+i+"/edit")}return e})}},{key:"handleFormAction",value:function e(t){var n=t.currentTarget.name
if("action_cancel"===n){var a=this.props.sectionConfig.url
this.props.router.push(a),t.preventDefault()}}},{key:"render",value:function e(){var t=null
switch(this.props.params.view){case"show":t=this.renderItemListView()
break
case"edit":t=this.renderDetailEditView()
break
case"create":t=this.renderCreateView()
break
default:t=this.renderIndexView()}return t}},{key:"renderIndexView",value:function e(){var t=this.props.sectionConfig.form.EditForm.schemaUrl,n={title:w.default._t("CampaignAdmin.ADDCAMPAIGN"),icon:"plus",
handleClick:this.addCampaign.bind(this)},a={createFn:this.campaignListCreateFn.bind(this),schemaUrl:t}
return f.default.createElement("div",{className:"fill-height","aria-expanded":"true"},f.default.createElement(B.default,null,f.default.createElement(A.default,{multiline:!0})),f.default.createElement("div",{
className:"panel panel--padded panel--scrollable flexbox-area-grow"},f.default.createElement("div",{className:"toolbar toolbar--content"},f.default.createElement("div",{className:"btn-toolbar"},f.default.createElement(k.default,n))),f.default.createElement(M.default,a)))

}},{key:"renderItemListView",value:function e(){var t={sectionConfig:this.props.sectionConfig,campaignId:this.props.params.id,itemListViewEndpoint:this.props.sectionConfig.itemListViewEndpoint,publishApi:this.publishApi,
handleBackButtonClick:this.handleBackButtonClick.bind(this)}
return f.default.createElement(j.default,t)}},{key:"renderDetailEditView",value:function e(){if(this.props.params.id<=0)return this.renderCreateView()
var t=this.props.sectionConfig.form.campaignEditForm.schemaUrl,n=t+"/"+this.props.params.id
return f.default.createElement("div",{className:"fill-height"},f.default.createElement(B.default,{showBackButton:!0,handleBackButtonClick:this.handleBackButtonClick},f.default.createElement(A.default,{
multiline:!0})),f.default.createElement("div",{className:"panel panel--padded panel--scrollable flexbox-area-grow form--inline"},f.default.createElement(M.default,{handleAction:this.handleFormAction,schemaUrl:n
})))}},{key:"renderCreateView",value:function e(){var t=this.props.sectionConfig.form.campaignCreateForm.schemaUrl
return f.default.createElement("div",{className:"fill-height"},f.default.createElement(B.default,{showBackButton:!0,handleBackButtonClick:this.handleBackButtonClick},f.default.createElement(A.default,{
multiline:!0})),f.default.createElement("div",{className:"panel panel--padded panel--scrollable flexbox-area-grow form--inline"},f.default.createElement(M.default,{handleSubmit:this.handleCreateCampaignSubmit,
handleAction:this.handleFormAction,schemaUrl:t})))}},{key:"campaignEditCreateFn",value:function e(t,n){var a=this,r=this.props.sectionConfig.url
if("action_cancel"===n.name){var i=c({},n,{handleClick:function e(t){t.preventDefault(),a.props.router.push(r)}})
return f.default.createElement(t,c({key:n.id},i))}return f.default.createElement(t,c({key:n.id},n))}},{key:"campaignAddCreateFn",value:function e(t,n){var a=this,r=this.props.sectionConfig.url
if("action_cancel"===n.name){var i=c({},n,{handleClick:function e(t){t.preventDefault(),a.props.router.push(r)}})
return f.default.createElement(t,c({key:n.name},i))}return f.default.createElement(t,c({key:n.name},n))}},{key:"campaignListCreateFn",value:function e(t,n){var a=this,r=this.props.sectionConfig.url,i="set"


if("GridField"===n.schemaComponent){var o=c({},n,{data:c({},n.data,{handleDrillDown:function e(t,n){a.props.router.push(r+"/"+i+"/"+n.ID+"/show")},handleEditRecord:function e(t,n){a.props.router.push(r+"/"+i+"/"+n+"/edit")

}})})
return f.default.createElement(t,c({key:o.name},o))}return f.default.createElement(t,c({key:n.name},n))}},{key:"addCampaign",value:function e(){var t=this.getActionRoute(0,"create")
this.props.router.push(t)}},{key:"getActionRoute",value:function e(t,n){return this.props.sectionConfig.url+"/set/"+t+"/"+n}}]),t}(P.default)
G.propTypes={breadcrumbsActions:f.default.PropTypes.object.isRequired,campaignId:f.default.PropTypes.string,sectionConfig:f.default.PropTypes.shape({publishEndpoint:f.default.PropTypes.shape({url:f.default.PropTypes.string,
method:f.default.PropTypes.string}),form:f.default.PropTypes.shape({EditForm:f.default.PropTypes.shape({schemaUrl:f.default.PropTypes.string}),campaignEditForm:f.default.PropTypes.shape({schemaUrl:f.default.PropTypes.string
}),campaignCreateForm:f.default.PropTypes.shape({schemaUrl:f.default.PropTypes.string})})}),securityId:f.default.PropTypes.string.isRequired,view:f.default.PropTypes.string},t.default=(0,b.withRouter)((0,
m.connect)(s,u)(G))},function(e,t){e.exports=React},function(e,t){e.exports=ReactRedux},function(e,t){e.exports=ReduxForm},function(e,t){e.exports=Redux},function(e,t){e.exports=Backend},function(e,t){
e.exports=BreadcrumbsActions},function(e,t){e.exports=Breadcrumb},function(e,t){e.exports=SilverStripeComponent},function(e,t){e.exports=FormAction},function(e,t){e.exports=i18n},function(e,t){e.exports=Toolbar

},function(e,t){e.exports=FormBuilderLoader},function(e,t,n){"use strict"
function a(e){if(e&&e.__esModule)return e
var t={}
if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])
return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")


return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t)
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){var n=null,a=t.sectionConfig.treeClass


return e.records&&e.records[a]&&t.campaignId&&(n=e.records[a][parseInt(t.campaignId,10)]),{config:e.config,record:n||{},campaign:e.campaign,treeClass:a}}function u(e){return{breadcrumbsActions:(0,h.bindActionCreators)(y,e),
recordActions:(0,h.bindActionCreators)(C,e),campaignActions:(0,h.bindActionCreators)(E,e)}}Object.defineProperty(t,"__esModule",{value:!0})
var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]
for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n]
a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),d=function e(t,n,a){null===t&&(t=Function.prototype)


var r=Object.getOwnPropertyDescriptor(t,n)
if(void 0===r){var i=Object.getPrototypeOf(t)
return null===i?void 0:e(i,n,a)}if("value"in r)return r.value
var o=r.get
if(void 0!==o)return o.call(a)},f=n(7),m=r(f),h=n(10),g=n(8),b=n(12),y=a(b),v=n(20),C=a(v),_=n(21),E=a(_),A=n(14),I=r(A),P=n(24),S=r(P),k=n(25),T=r(k),w=n(26),N=r(w),B=n(17),O=r(B),M=n(15),R=r(M),j=n(27),x=r(j),G=n(13),U=r(G),D=n(28),F=r(D),L=n(16),H=r(L),V="SilverStripe\\CMS\\Controllers\\CMSPagesController",q=function(e){
function t(e){i(this,t)
var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))
return n.handlePublish=n.handlePublish.bind(n),n.handleItemSelected=n.handleItemSelected.bind(n),n.setBreadcrumbs=n.setBreadcrumbs.bind(n),n.handleCloseItem=n.handleCloseItem.bind(n),n}return l(t,e),p(t,[{
key:"componentDidMount",value:function e(){var n=this.props.itemListViewEndpoint.url.replace(/:id/,this.props.campaignId)
d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.setBreadcrumbs(),Object.keys(this.props.record).length||this.props.recordActions.fetchRecord(this.props.treeClass,"get",n).then(this.setBreadcrumbs)

}},{key:"setBreadcrumbs",value:function e(){if(this.props.record){var t=[{text:H.default._t("CampaignAdmin.CAMPAIGN","Campaigns"),href:this.props.sectionConfig.url}]
t.push({text:this.props.record.Name,href:this.props.sectionConfig.url+"/set/"+this.props.campaignId+"/show"}),this.props.breadcrumbsActions.setBreadcrumbs(t)}}},{key:"render",value:function e(){var t=this,n=this.props.campaign.changeSetItemId,a=null,r=n?"":"campaign-admin__campaign--hide-preview",i=this.props.campaignId,o=this.props.record,l=this.groupItemsForSet(),s=[]


Object.keys(l).forEach(function(e){var r=l[e],u=r.items.length,c=[],p=u+" "+(1===u?r.singular:r.plural),d="Set_"+i+"_Group_"+e
r.items.forEach(function(e){n||(n=e.ID)
var r=n===e.ID
r&&e._links&&(a=e._links)
var i=[]
"none"!==e.ChangeType&&"published"!==o.State||i.push("list-group-item--inactive"),r&&i.push("active"),c.push(m.default.createElement(N.default,{key:e.ID,className:i.join(" "),handleClick:t.handleItemSelected,
handleClickArg:e.ID},m.default.createElement(x.default,{item:e,campaign:t.props.record})))}),s.push(m.default.createElement(T.default,{key:d,groupid:d,title:p},c))})
var u=[this.props.config.absoluteBaseUrl,this.props.config.sections.find(function(e){return e.name===V}).url].join(""),c=s.length?m.default.createElement(S.default,null,s):m.default.createElement("div",{
className:"alert alert-warning",role:"alert"},m.default.createElement("strong",null,"This campaign is empty.")," You can add items to a campaign by selecting ",m.default.createElement("em",null,"Add to campaign")," from within the ",m.default.createElement("em",null,"More Options "),"popup on ",m.default.createElement("a",{
href:u},"pages")," and files."),p=["panel","panel--padded","panel--scrollable","flexbox-area-grow"]
return m.default.createElement("div",{className:"fill-width campaign-admin__campaign "+r},m.default.createElement("div",{className:"fill-height campaign-admin__campaign-items","aria-expanded":"true"},m.default.createElement(O.default,{
showBackButton:!0,handleBackButtonClick:this.props.handleBackButtonClick},m.default.createElement(U.default,{multiline:!0})),m.default.createElement("div",{className:p.join(" ")},c),m.default.createElement("div",{
className:"toolbar toolbar--south"},this.renderButtonToolbar())),m.default.createElement(F.default,{itemLinks:a,itemId:n,onBack:this.handleCloseItem}))}},{key:"handleItemSelected",value:function e(t,n){
this.props.campaignActions.selectChangeSetItem(n)}},{key:"handleCloseItem",value:function e(){this.props.campaignActions.selectChangeSetItem(null)}},{key:"renderButtonToolbar",value:function e(){var t=this.getItems()


if(!t||!t.length)return m.default.createElement("div",{className:"btn-toolbar"})
var n={}
return"open"===this.props.record.State?n=c(n,{title:H.default._t("CampaignAdmin.PUBLISHCAMPAIGN"),buttonStyle:"primary",loading:this.props.campaign.isPublishing,handleClick:this.handlePublish,icon:"rocket"
}):"published"===this.props.record.State&&(n=c(n,{title:H.default._t("CampaignAdmin.REVERTCAMPAIGN"),buttonStyle:"secondary-outline",icon:"back-in-time",disabled:!0})),m.default.createElement("div",{className:"btn-toolbar"
},m.default.createElement(R.default,n))}},{key:"getItems",value:function e(){return this.props.record&&this.props.record._embedded?this.props.record._embedded.items:null}},{key:"groupItemsForSet",value:function e(){
var t={},n=this.getItems()
return n?(n.forEach(function(e){var n=e.BaseClass
t[n]||(t[n]={singular:e.Singular,plural:e.Plural,items:[]}),t[n].items.push(e)}),t):t}},{key:"handlePublish",value:function e(t){t.preventDefault(),this.props.campaignActions.publishCampaign(this.props.publishApi,this.props.treeClass,this.props.campaignId)

}}]),t}(I.default)
q.propTypes={campaign:m.default.PropTypes.shape({isPublishing:m.default.PropTypes.bool.isRequired,changeSetItemId:m.default.PropTypes.number}),breadcrumbsActions:m.default.PropTypes.object.isRequired,campaignActions:m.default.PropTypes.object.isRequired,
publishApi:m.default.PropTypes.func.isRequired,record:m.default.PropTypes.object.isRequired,recordActions:m.default.PropTypes.object.isRequired,sectionConfig:m.default.PropTypes.object.isRequired,handleBackButtonClick:m.default.PropTypes.func
},t.default=(0,g.connect)(s,u)(q)},function(e,t){e.exports=RecordsActions},function(e,t,n){"use strict"
function a(e){return e&&e.__esModule?e:{default:e}}function r(e){return{type:s.default.SET_CAMPAIGN_SELECTED_CHANGESETITEM,payload:{changeSetItemId:e}}}function i(e,t){return function(n){n({type:s.default.SET_CAMPAIGN_ACTIVE_CHANGESET,
payload:{campaignId:e,view:t}})}}function o(e,t,n){return function(a){a({type:s.default.PUBLISH_CAMPAIGN_REQUEST,payload:{campaignId:n}}),e({id:n}).then(function(e){a({type:s.default.PUBLISH_CAMPAIGN_SUCCESS,
payload:{campaignId:n}}),a({type:c.default.FETCH_RECORD_SUCCESS,payload:{recordType:t,data:e}})}).catch(function(e){a({type:s.default.PUBLISH_CAMPAIGN_FAILURE,payload:{error:e}})})}}Object.defineProperty(t,"__esModule",{
value:!0}),t.selectChangeSetItem=r,t.showCampaignView=i,t.publishCampaign=o
var l=n(22),s=a(l),u=n(23),c=a(u)},function(e,t){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.default={SET_CAMPAIGN_ACTIVE_CHANGESET:"SET_CAMPAIGN_ACTIVE_CHANGESET",SET_CAMPAIGN_SELECTED_CHANGESETITEM:"SET_CAMPAIGN_SELECTED_CHANGESETITEM",PUBLISH_CAMPAIGN_REQUEST:"PUBLISH_CAMPAIGN_REQUEST",
PUBLISH_CAMPAIGN_SUCCESS:"PUBLISH_CAMPAIGN_SUCCESS",PUBLISH_CAMPAIGN_FAILURE:"PUBLISH_CAMPAIGN_FAILURE"}},function(e,t){e.exports=RecordsActionTypes},function(e,t){e.exports=Accordion},function(e,t){e.exports=AccordionBlock

},function(e,t){e.exports=ListGroupItem},function(e,t,n){"use strict"
function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")


return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t)
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{
value:!0})
var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n]
a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(7),u=a(s),c=n(14),p=a(c),d=n(16),f=a(d),m=function(e){
function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),l(t,[{key:"render",value:function e(){var t=null,n={},a=this.props.item,r=this.props.campaign


if("open"===r.State)switch(a.ChangeType){case"created":n.className="label label-warning list-group-item__status",n.Title=f.default._t("CampaignAdmin.DRAFT","Draft")
break
case"modified":n.className="label label-warning list-group-item__status",n.Title=f.default._t("CampaignAdmin.MODIFIED","Modified")
break
case"deleted":n.className="label label-error list-group-item__status",n.Title=f.default._t("CampaignAdmin.REMOVED","Removed")
break
case"none":default:n.className="label label-success list-group-item__status",n.Title=f.default._t("CampaignAdmin.NO_CHANGES","No changes")}var i=u.default.createElement("span",{className:"list-group-item__info campaign-admin__item-links--has-links font-icon-link"
},"3 linked items")
return a.Thumbnail&&(t=u.default.createElement("span",{className:"list-group-item__thumbnail"},u.default.createElement("img",{alt:a.Title,src:a.Thumbnail}))),u.default.createElement("div",{className:"fill-width"
},t,u.default.createElement("div",{className:"list-group-item__details"},u.default.createElement("h4",{className:"list-group-item__heading"},a.Title),u.default.createElement("span",{className:"list-group-item__info campaign-admin__item-links--is-linked font-icon-link"
}),i,n.className&&n.Title&&u.default.createElement("span",{className:n.className},n.Title)))}}]),t}(p.default)
m.propTypes={campaign:u.default.PropTypes.object.isRequired,item:u.default.PropTypes.object.isRequired},t.default=m},function(e,t){e.exports=Preview},function(e,t,n){"use strict"
function a(e){return e&&e.__esModule?e:{default:e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments[1]
switch(t.type){case u.default.SET_CAMPAIGN_SELECTED_CHANGESETITEM:return(0,l.default)(i({},e,{changeSetItemId:t.payload.changeSetItemId}))
case u.default.SET_CAMPAIGN_ACTIVE_CHANGESET:return(0,l.default)(i({},e,{campaignId:t.payload.campaignId,view:t.payload.view,changeSetItemId:null}))
case u.default.PUBLISH_CAMPAIGN_REQUEST:return(0,l.default)(i({},e,{isPublishing:!0}))
case u.default.PUBLISH_CAMPAIGN_SUCCESS:case u.default.PUBLISH_CAMPAIGN_FAILURE:return(0,l.default)(i({},e,{isPublishing:!1}))
default:return e}}Object.defineProperty(t,"__esModule",{value:!0})
var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]
for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=n(30),l=a(o),s=n(22),u=a(s),c=(0,l.default)({campaignId:null,changeSetItemId:null,isPublishing:!1,view:null})
t.default=r},function(e,t){e.exports=function e(t){Object.freeze(t)
var n="function"==typeof t,a=Object.prototype.hasOwnProperty
return Object.getOwnPropertyNames(t).forEach(function(r){!a.call(t,r)||n&&("caller"===r||"callee"===r||"arguments"===r)||null===t[r]||"object"!=typeof t[r]&&"function"!=typeof t[r]||Object.isFrozen(t[r])||e(t[r])

}),t}}])
>>>>>>> add new title prop, map to breadcrumbs
